#!/bin/sh

#
# http://gitlab.com/morgaux/etc
#

##
# ~/.profile generator
##

set -e # stop on uncaught error

##
# Warning message
##
{
	echo "#!/bin/sh"
	echo ""
	echo "##                                                                           ##"
	echo "#                              !!! IMPORTANT !!!                              #"
	echo "#                                                                             #"
	echo "#               DO NOT MODIFY - FILE GENERATED BY ~/etc/profile               #"
	echo "#                                                                             #"
	echo "##                                                                           ##"
	echo ""
} > ~/.profile.tmp # Create new temporary file

##
# add environment setup scripts to temporary file
##
for file in environment directory aliases; do
	sed -n '/#!\/bin/!p' ~/etc/$file >> ~/.profile.tmp || exit 1
done

##
# replace old file
##
rm ~/.profile
mv ~/.profile.tmp ~/.profile

log "Profile created sucessfully"

